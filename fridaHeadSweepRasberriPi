# Pin Definitions
servo_pin = 18  # GPIO 18 (physical pin 12) â€” change if you used a different pin

# Set up GPIO
GPIO.setmode(GPIO.BCM)
GPIO.setup(servo_pin, GPIO.OUT)

# Set up PWM on the servo pin at 50Hz (standard for servos)
pwm = GPIO.PWM(servo_pin, 50)
pwm.start(0)

def set_angle(angle):
    """Set servo to specified angle."""
    duty = (angle / 18.0) + 2  # Duty cycle formula for 0-180 degrees
    GPIO.output(servo_pin, True)
    pwm.ChangeDutyCycle(duty)
    time.sleep(0.015)
    GPIO.output(servo_pin, False)
    pwm.ChangeDutyCycle(0)

try:
    while True:
        # Sweep from 0 to 180 degrees
        for angle in range(0, 181, 1):
            set_angle(angle)
            time.sleep(0.015)
        
        # Sweep from 180 back to 0 degrees
        for angle in range(180, -1, -1):
            set_angle(angle)
            time.sleep(0.015)

except KeyboardInterrupt:
    print("Stopping...")
finally:
    pwm.stop()
    GPIO.cleanup()
